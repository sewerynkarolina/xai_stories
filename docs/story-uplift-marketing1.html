<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns | XAI Stories</title>
  <meta name="description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns | XAI Stories" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="Case studies for eXplainable Artificial Intelligence" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns | XAI Stories" />
  
  <meta name="twitter:description" content="Case studies for eXplainable Artificial Intelligence" />
  <meta name="twitter:image" content="images/cover.png" />



<meta name="date" content="2020-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="heloc-credits.html"/>
<link rel="next" href="examples.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><h3>XAI Stories</h3> Case studies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="0.1" data-path="foreword.html"><a href="foreword.html#why"><i class="fa fa-check"></i><b>0.1</b> Why?</a></li>
<li class="chapter" data-level="0.2" data-path="foreword.html"><a href="foreword.html#what"><i class="fa fa-check"></i><b>0.2</b> What?</a></li>
<li class="chapter" data-level="0.3" data-path="foreword.html"><a href="foreword.html#how"><i class="fa fa-check"></i><b>0.3</b> How?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="story-compas.html"><a href="story-compas.html"><i class="fa fa-check"></i><b>1</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="1.1" data-path="story-compas.html"><a href="story-compas.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="story-compas.html"><a href="story-compas.html#previous-work"><i class="fa fa-check"></i><b>1.1.1</b> Previous work</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="story-compas.html"><a href="story-compas.html#models"><i class="fa fa-check"></i><b>1.2</b> Models</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="story-compas.html"><a href="story-compas.html#recidivism"><i class="fa fa-check"></i><b>1.2.1</b> Recidivism</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="story-compas.html"><a href="story-compas.html#explanations"><i class="fa fa-check"></i><b>1.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="story-compas.html"><a href="story-compas.html#model-specific"><i class="fa fa-check"></i><b>1.3.1</b> Model specific</a></li>
<li class="chapter" data-level="1.3.2" data-path="story-compas.html"><a href="story-compas.html#instance-specific"><i class="fa fa-check"></i><b>1.3.2</b> Instance specific</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="story-compas.html"><a href="story-compas.html#summary-and-conclusions"><i class="fa fa-check"></i><b>1.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html"><i class="fa fa-check"></i><b>2</b> Story House Sale Prices: eXplainable predictions for house sale</a>
<ul>
<li class="chapter" data-level="2.1" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#data-preperation"><i class="fa fa-check"></i><b>2.2</b> Data preperation</a></li>
<li class="chapter" data-level="2.3" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#model"><i class="fa fa-check"></i><b>2.3</b> Model</a></li>
<li class="chapter" data-level="2.4" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#explanations-1"><i class="fa fa-check"></i><b>2.4</b> Explanations</a></li>
<li class="chapter" data-level="2.5" data-path="story-house-sale-prices.html"><a href="story-house-sale-prices.html#summary-and-conclusions-1"><i class="fa fa-check"></i><b>2.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html"><i class="fa fa-check"></i><b>3</b> Story hotel booking: eXplainable predictions of booking cancellation and guests coming back</a>
<ul>
<li class="chapter" data-level="3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#imbalanced-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Imbalanced dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1"><i class="fa fa-check"></i><b>3.2</b> Model</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1.-booking-cancellation"><i class="fa fa-check"></i><b>3.2.1</b> Model 1. Booking cancellation</a></li>
<li class="chapter" data-level="3.2.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-2.-repeated-guests"><i class="fa fa-check"></i><b>3.2.2</b> Model 2. Repeated guests</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#explanations-2"><i class="fa fa-check"></i><b>3.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-1.-booking-cancellation-1"><i class="fa fa-check"></i><b>3.3.1</b> Model 1. Booking cancellation</a></li>
<li class="chapter" data-level="3.3.2" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#model-2.-repeated-guests-1"><i class="fa fa-check"></i><b>3.3.2</b> Model 2. Repeated guests</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="story-hotel-booking.html"><a href="story-hotel-booking.html#summary-and-conclusions-2"><i class="fa fa-check"></i><b>3.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html"><i class="fa fa-check"></i><b>4</b> Story Uplift Modelling: eXplaining colon cancer survival rate after treatment</a>
<ul>
<li class="chapter" data-level="4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#what-is-uplift-modelling"><i class="fa fa-check"></i><b>4.1.1</b> What is Uplift Modelling?</a></li>
<li class="chapter" data-level="4.1.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-description"><i class="fa fa-check"></i><b>4.1.2</b> Dataset Description</a></li>
<li class="chapter" data-level="4.1.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#ideas"><i class="fa fa-check"></i><b>4.1.3</b> Ideas</a></li>
<li class="chapter" data-level="4.1.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#why-is-it-worth-the-hassle"><i class="fa fa-check"></i><b>4.1.4</b> Why is it worth the hassle?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#data-preprocessing"><i class="fa fa-check"></i><b>4.2</b> Data Preprocessing</a></li>
<li class="chapter" data-level="4.3" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#model-2"><i class="fa fa-check"></i><b>4.3</b> Model</a></li>
<li class="chapter" data-level="4.4" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#explanations-3"><i class="fa fa-check"></i><b>4.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#dataset-level-explainations"><i class="fa fa-check"></i><b>4.4.1</b> Dataset Level Explainations</a></li>
<li class="chapter" data-level="4.4.2" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#instance-level-explainations"><i class="fa fa-check"></i><b>4.4.2</b> Instance Level Explainations</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="story-uplift-modelling.html"><a href="story-uplift-modelling.html#summary-and-conclusions-3"><i class="fa fa-check"></i><b>4.5</b> Summary and Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html"><i class="fa fa-check"></i><b>5</b> Story Meps: eXplainable predictions for healthcare expenditures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-3"><i class="fa fa-check"></i><b>5.2</b> Model</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#data"><i class="fa fa-check"></i><b>5.2.1</b> Data</a></li>
<li class="chapter" data-level="5.2.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-4"><i class="fa fa-check"></i><b>5.2.2</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#explanations-4"><i class="fa fa-check"></i><b>5.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#model-level-explainations"><i class="fa fa-check"></i><b>5.3.1</b> Model Level Explainations</a></li>
<li class="chapter" data-level="5.3.2" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---business-approach"><i class="fa fa-check"></i><b>5.3.2</b> Instance Level Explainations - business approach</a></li>
<li class="chapter" data-level="5.3.3" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#instance-level-explainations---instance-specific-approach"><i class="fa fa-check"></i><b>5.3.3</b> Instance Level Explainations - instance specific approach</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="story-meps-explainable-predictions-for-healthcare-expenditures.html"><a href="story-meps-explainable-predictions-for-healthcare-expenditures.html#summary-and-conclusions-4"><i class="fa fa-check"></i><b>5.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html"><i class="fa fa-check"></i><b>6</b> Story MEPS: Healthcare expenditures of individuals</a>
<ul>
<li class="chapter" data-level="6.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#todos"><i class="fa fa-check"></i><b>6.1</b> TODOS</a></li>
<li class="chapter" data-level="6.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#introduction-5"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#models-1"><i class="fa fa-check"></i><b>6.3</b> Models</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-1-linear"><i class="fa fa-check"></i><b>6.3.1</b> Model 1: Linear</a></li>
<li class="chapter" data-level="6.3.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-2-ann"><i class="fa fa-check"></i><b>6.3.2</b> Model 2: ANN</a></li>
<li class="chapter" data-level="6.3.3" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#model-3-xgb"><i class="fa fa-check"></i><b>6.3.3</b> Model 3: XGB</a></li>
<li class="chapter" data-level="6.3.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#results"><i class="fa fa-check"></i><b>6.3.4</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#explanations-5"><i class="fa fa-check"></i><b>6.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#instance-level-1"><i class="fa fa-check"></i><b>6.4.1</b> Instance level</a></li>
<li class="chapter" data-level="6.4.2" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#dataset-level-1"><i class="fa fa-check"></i><b>6.4.2</b> Dataset level</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="story-meps-healthcare-expenditures-of-individuals.html"><a href="story-meps-healthcare-expenditures-of-individuals.html#summary-and-conclusions-5"><i class="fa fa-check"></i><b>6.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="story-lungs.html"><a href="story-lungs.html"><i class="fa fa-check"></i><b>7</b> Story lungs: eXplainable predictions for post operational risks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="story-lungs.html"><a href="story-lungs.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="story-lungs.html"><a href="story-lungs.html#model-5"><i class="fa fa-check"></i><b>7.2</b> Model</a></li>
<li class="chapter" data-level="7.3" data-path="story-lungs.html"><a href="story-lungs.html#explanations-6"><i class="fa fa-check"></i><b>7.3</b> Explanations</a></li>
<li class="chapter" data-level="7.4" data-path="story-lungs.html"><a href="story-lungs.html#summary-and-conclusions-6"><i class="fa fa-check"></i><b>7.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="heloc-credits.html"><a href="heloc-credits.html"><i class="fa fa-check"></i><b>8</b> Heloc credits</a>
<ul>
<li class="chapter" data-level="8.1" data-path="heloc-credits.html"><a href="heloc-credits.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="heloc-credits.html"><a href="heloc-credits.html#dataset"><i class="fa fa-check"></i><b>8.2</b> Dataset</a></li>
<li class="chapter" data-level="8.3" data-path="heloc-credits.html"><a href="heloc-credits.html#model-6"><i class="fa fa-check"></i><b>8.3</b> Model</a></li>
<li class="chapter" data-level="8.4" data-path="heloc-credits.html"><a href="heloc-credits.html#explanations-7"><i class="fa fa-check"></i><b>8.4</b> Explanations</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="heloc-credits.html"><a href="heloc-credits.html#explanation-for-management"><i class="fa fa-check"></i><b>8.4.1</b> Explanation for management</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="heloc-credits.html"><a href="heloc-credits.html#application-for-clients"><i class="fa fa-check"></i><b>8.5</b> Application for clients</a></li>
<li class="chapter" data-level="8.6" data-path="heloc-credits.html"><a href="heloc-credits.html#summary-and-conclusion"><i class="fa fa-check"></i><b>8.6</b> Summary and conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html"><i class="fa fa-check"></i><b>9</b> Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns</a>
<ul>
<li class="chapter" data-level="9.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#introduction-8"><i class="fa fa-check"></i><b>9.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#approaches-towards-uplift-modeling"><i class="fa fa-check"></i><b>9.1.1</b> Approaches towards uplift modeling</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#dataset-1"><i class="fa fa-check"></i><b>9.2</b> Dataset</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#feature-engineering"><i class="fa fa-check"></i><b>9.2.1</b> Feature engineering</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#model-wymaga-dopracowania"><i class="fa fa-check"></i><b>9.3</b> Model [wymaga dopracowania]</a></li>
<li class="chapter" data-level="9.4" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#explanations-wymaga-dopracowania"><i class="fa fa-check"></i><b>9.4</b> Explanations [wymaga dopracowania]</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#individual-perspective"><i class="fa fa-check"></i><b>9.4.1</b> Individual perspective</a></li>
<li class="chapter" data-level="9.4.2" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#data-scientist-perspective"><i class="fa fa-check"></i><b>9.4.2</b> Data scientist perspective</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="story-uplift-marketing1.html"><a href="story-uplift-marketing1.html#summary-and-conclusions-7"><i class="fa fa-check"></i><b>9.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i>Examples</a></li>
<li class="chapter" data-level="10" data-path="story-covid19.html"><a href="story-covid19.html"><i class="fa fa-check"></i><b>10</b> Story covid19: eXplainable predictions for mortality</a>
<ul>
<li class="chapter" data-level="10.1" data-path="story-covid19.html"><a href="story-covid19.html#figures-and-citations"><i class="fa fa-check"></i><b>10.1</b> Figures and citations</a></li>
<li class="chapter" data-level="10.2" data-path="story-covid19.html"><a href="story-covid19.html#introduction-9"><i class="fa fa-check"></i><b>10.2</b> Introduction</a></li>
<li class="chapter" data-level="10.3" data-path="story-covid19.html"><a href="story-covid19.html#model-7"><i class="fa fa-check"></i><b>10.3</b> Model</a></li>
<li class="chapter" data-level="10.4" data-path="story-covid19.html"><a href="story-covid19.html#explanations-8"><i class="fa fa-check"></i><b>10.4</b> Explanations</a></li>
<li class="chapter" data-level="10.5" data-path="story-covid19.html"><a href="story-covid19.html#summary-and-conclusions-8"><i class="fa fa-check"></i><b>10.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html"><i class="fa fa-check"></i><b>11</b> Story COMPAS: recidivism reloaded</a>
<ul>
<li class="chapter" data-level="11.1" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#introduction-10"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#model-8"><i class="fa fa-check"></i><b>11.2</b> Model</a></li>
<li class="chapter" data-level="11.3" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#explanations-9"><i class="fa fa-check"></i><b>11.3</b> Explanations</a></li>
<li class="chapter" data-level="11.4" data-path="story-compas-recidivism-reloaded.html"><a href="story-compas-recidivism-reloaded.html#summary-and-conclusions-9"><i class="fa fa-check"></i><b>11.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">XAI Stories</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="story-uplift-marketing1" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Story Uplift modeling on marketing dataset: eXplainable predictions for optimized marketing campaigns</h1>
<p><em>Authors: Jan Ludziejewski (Warsaw University), Paulina Tomaszewska (Warsaw University of Technology), Andżelika Zalewska (Warsaw University of Technology)</em></p>
<p><em>Mentors: Łukasz Frydrych (McKinsey), Łukasz Pająk (McKinsey)</em></p>
<div id="introduction-8" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Introduction</h2>
<p>Running bussiness is a challenge. It involves making a lot of decisions in order to maximize profits and cut down costs - finding the tradeoff is not a straight-forward task.
Here comes Machine Learning and uplift models that can help in optimizing marketing costs.</p>
<p>People often ask whether it makes sense to address marketing campaigns to all company’s customers.
From one point of view by sending an offer we think the probability that the customer will buy our product is higher - in fact it is not always the cases
(the matter will be described in details later).
On the other hand, making large-scale campaign is costly. Therefore it would be good to know what is the return of investment.</p>
<p>Above we presented the common sense arguments but how science addresses a question: <em>“Is it true that by sending the marketing offer we only extend the chance for the customer to buy our product and therefore extend our profit?”</em>.</p>
<p>The issue was already investigated <span class="citation">(Verbeke and Bravo <a href="#ref-book_uplift" role="doc-biblioref">2017</a>)</span> and it was pointed out that customers of any company can be divided into 4 groups <a href="story-uplift-marketing1.html#fig:4groups">9.1</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:4groups"></span>
<img src="images/09_e45e2d97-confmatrix_alt.png" alt="Customer types taking into consideration their response to treatment" width="50%" />
<p class="caption">
FIGURE 9.1: Customer types taking into consideration their response to treatment
</p>
</div>
<p>The image matrix was created based on the customer decision to buy a product depending on the fact that they were addressed by marketing campaign or not. The action used for trigggering in customer the particular behaviour is called treatment. In the 4 groups we distinghuish <a href="story-uplift-marketing1.html#fig:4groups">9.1</a> :</p>
<ul>
<li>the customers that irrespective of the fact that they experienced treatment or now that are going to buy a product <em>(these are called “sure things”)</em></li>
<li>the customers that irrespective of the fact that they experienced treatment or now that are <strong>NOT</strong> going to buy a product <em>(“lost causes”)</em></li>
<li>the customers that without being exposed to marketing campaing would <strong>NOT</strong> buy a product <em>(“persuadables”)</em></li>
<li>the customers that without being exposed to marketing campaing would buy a product but in case thay receive a marketing offer they resign <em>(“sleeping dogs”)</em></li>
</ul>
<p>It can be than observed that in case of <em>“lost causes”</em> and <em>“sure things”</em> sending a marketing offer makes no impact therefore it doesn’t make sense to spend money on targeting these customers. As the company we should however pay more attention to the groups <em>“persuadables”</em> and <em>“sleeping dogs”</em>. In case of the first bearing the costs of marketing campaign will bring benefit. In case of the latter we not only spend money on targeting them but as the result we will also discourage them from buying the product therefore we as a company loose two times. The case of sleeping dogs can seem irrealistic, therefore we present an example.</p>
<blockquote>
<p><em>Let’s imagine there is a customer that subscriped our paid newsletter. He forgot that he pays each month fixed fee. He would continue paying unless a company sends him a discount offer. At this moment the customer realises that he doesn;t need and offer and unsubscripes.</em></p>
</blockquote>
<p>By understading the structure of the company’s customers, it can target its offer more effectively.</p>
<div id="approaches-towards-uplift-modeling" class="section level3" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Approaches towards uplift modeling</h3>
<p>In <span class="citation">(Akshay Kumar <a href="#ref-uplift_stanford" role="doc-biblioref">2018</a>)</span> it was pointed out that the problem of deciding whether it is profitable to send an offer to particular customer can be tackled from two different perspectives: predictive response modelling (it is classical classification task where model assigns probability to each of the classes) and uplift modelling (where the “incremental” probability of purchase is modelled). The latter is more interesting but at the same time more challenging.
Uplift modeling is a technique that helps to determine probability gain that the customer by getting the marketing materials will buy a product.
The field is relatievely new. The two most commmon approaches are <span class="citation">(Lee <a href="#ref-uplift_approaches" role="doc-biblioref">2018</a>)</span>:</p>
<ul>
<li>Two Model</li>
</ul>
<p>In this method there are build two classifiers. The one is trained on observations that received treatment <em>(model_T1)</em> and the second is trained on observations that didn’t receive a treatment <em>(model_T0)</em>. Later the uplift for particular observations is calculated. If the observation experienced treatment then it is an input to the <em>model_T1</em> and the probability that the customer will buy a product is calculated. Later the if condition is investigated meaning what would happen if the customer didn’t receive a treatment. In Ssuch case the treatment indicator in observation’s feature is changed to “zero”. Such modified record is an input to <em>model_T0</em> that predicts the probability that such customer will buy a product. The uplift is calculated as difference between output of the <em>model_T1</em> and <em>model_T0</em>. The higher the difference, the more profitable is addressing marketing campaign to particular customer.</p>
<ul>
<li>One Model</li>
</ul>
<p>The one model approach is similar conceptually to the Two model approach with such a difference that instead of building two classifiers only one is used. Therefore every observation is an input to the model that generates prediction. Later the indicator in the treatment column is changed into the negation and such vector is used as input to the model that once again output probability that the customer buy a product. The uplift is the difference of the two predicted probabilities.</p>
<p>[przydałoby się stworzyć jakąś prostą grafikę tutaj]</p>
<p>As the uplift modeling is an emenrging field there isn’t a list of good practices in terms of what classifier is better to use.
In <span class="citation">(Zaniewicz and Jaroszewicz <a href="#ref-uplift_svm" role="doc-biblioref">2013</a>)</span>, the autors investigated application of SVM. But due to the fact that SVM requires precise, long lasting finetuning we decided to use xgboost (the architecture of our solution is described in details in section Model).</p>
</div>
</div>
<div id="dataset-1" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Dataset</h2>
<p>There is a scarcity of well-documented datasets dedicated to uplift modeling. Therefore the autors of <span class="citation">(Rzepakowski and Jaroszewicz <a href="#ref-uplift_dataset_modification" role="doc-biblioref">2012</a>)</span> proposed to artificially modify available datasets in order to extract information about treatment. As the purpose of this story is to investigate XAI techniques in the domain of uplift modeling we decided to use real life dataset.
We chose Kevin Hillstrom’s dataset from E-Mail Analytics And Data Mining Challenge <span class="citation">(Hillstrom <a href="#ref-uplift_dataset_marketing" role="doc-biblioref">2008</a>)</span>.The dataset consists of 64000 records reflecting customers that last purchased within 12 months. As a treatment an e-mail campaign was addressed:</p>
<ul>
<li>1/3 of customers were randomly chosen to receive an e-mail campaign featuring Mens merchandise</li>
<li>1/3 were randomly chosen to receive an e-mail campaign featuring Womens merchandise</li>
<li>1/3 were randomly chosen to not receive an e-mail campaign <em>(“control group”)</em></li>
</ul>
<p>As an expected behaviour the following actions were determined:
* visit the company’s website within 2 weeks after sending to the customers a marketing campaign
* purchase a product from the website within 2 weeks after sending to the customers a marketing campaign</p>
<p>In the challenge the task was to determine whether the Mens or Womens e-mail campaign was successful. In our task we reformulated the task and we want to answer the question whether any e-mail campaign was profitable for the company.</p>
<p>The features about customers in the dataset are specified in fig <a href="story-uplift-marketing1.html#fig:dataset">9.2</a>:</p>
<div class="figure" style="text-align: center"><span id="fig:dataset"></span>
<img src="images/09_xai_customer.jpg" alt="Customer features in the dataset" width="100%" />
<p class="caption">
FIGURE 9.2: Customer features in the dataset
</p>
</div>
<p>There is also information about customer activity in the two weeks following delivery of the e-mail campaign (these can be interpreted as labels):</p>
<ul>
<li>Visit: 1/0 indicator, 1 = Customer visited website in the following two weeks.</li>
<li>Conversion: 1/0 indicator, 1 = Customer purchased merchandise in the following two weeks.</li>
<li>Spend: Actual dollars spent in the following two weeks.</li>
</ul>
<p>[zwiększę potem czcionkę na grafice]</p>
<div id="feature-engineering" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Feature engineering</h3>
<p>It is largely imbalanced - there is only about 15% of positive cases in column Visit and x% in column Conversion.
In such situation we decided to use column Visit as a label.
As the number of column is small we decided to use one-hot encoding for transforming categorical variables instead of target encoding.</p>
</div>
</div>
<div id="model-wymaga-dopracowania" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Model [wymaga dopracowania]</h2>
<p>There is not many packages dedicated to uplift modeling in python. We investigated the two: pylift <span class="citation">(“Pylift Package - Documentation,” <a href="#ref-pylift" role="doc-biblioref">n.d.</a>)</span> and pyuplift. The latter enables usage of 4 types of models - one of those is Two Model approach. In pylift package there is the TransformedOutcome class that generate predictions. However, the model itself is not well described and uses XGBRegressor unserneath that is not intuitive. Fortunately the package offer also the class UpliftEval that allow uplift metric visualization.
In the scene, we decided to create our own classifier (as in the One-Model approach) and use UpliftEval class from pylift model for metric evaluation.
As the classifier we used fine-tuned XGBoost. In the figure below we show the cumulative gain chart for train and test sets.</p>
<div class="figure"><span id="fig:upliftRES"></span>
<img src="images/09_uplift_train.PNG" alt="Cumulative gain chart: (left) train set, (right) test set" width="50%" /><img src="images/09_uplift_test.PNG" alt="Cumulative gain chart: (left) train set, (right) test set" width="50%" />
<p class="caption">
FIGURE 9.3: Cumulative gain chart: (left) train set, (right) test set
</p>
</div>
<p>[DODAĆ ZDANIE JAK CZYTAĆ TEN WYKRES - JAK ON POWSTAJE]</p>
<p>It can be seen that our model is better than random choice but much worse than practical/theoretical maximum possible. It is also worse than the case without sleeping dogs.
It is worth emphesising that our model didn’t experience overfitting as its quality on train and test sets are similar.</p>
<p>[napisać gdzieś że miara accuracy jest tu niewłaściwa i poprzeć to dowodem liczbowym]</p>
</div>
<div id="explanations-wymaga-dopracowania" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Explanations [wymaga dopracowania]</h2>
<p>The model is already created and the metric show that it brings additional value.Here comes the question whether the model is reliable, does it make the decision based on the features that are important form expert knowledge perspective. Such judgement can be done based on results of XAI tools.
We decided to investigate model interpretability from the perspective of the 4 customer groups @(fig:4groups). Therefore we chose one representative customer from each group and analyse the model on instance-level.</p>
<div id="individual-perspective" class="section level3" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> Individual perspective</h3>
<p>In order to explain model output for particular customer we employed Shapley values <span class="citation">(<span class="citeproc-not-found" data-reference-id="shap"><strong>???</strong></span>)</span>. We benefit from additive feature attribution property of shapley values to model the uplift:</p>
<p>UPLIFT=P(PUCHASE|TREATMENT=1) - P(PURCHASE|TREATMENT=0)) –&gt;
SHAP(P(PUCHASE|TREATMENT=1)) - SHAP(P(PUCHASE|TREATMENT=0)) = SHAP (UPLIFT)</p>
<p>This gives us great opportunity to evaluate these two vectors of Shapley values independently. For example if we use any tree-based model, we can make use of tree-based kernel for shapley value estimation (faster and better convergent) instead of modelling it directly as a black blox model returning difference between two regressors.</p>
<p>Experimental results proved, that these two ways of calulcation are providing close estimations, with precision to numerical errors.</p>
<p>Below we present Shapley values for the customer with the highest and the lowest uplift computed directly on uplift (without using its additivity) @(fig:upliftSHAP).</p>
<div class="figure"><span id="fig:upliftSHAP"></span>
<img src="images/09_shap_min_uplift.PNG" alt="Shapley values: (left) customer with the lowest uplift, (right) customer with the highest uplift" width="50%" /><img src="images/09_shap_max_uplift.PNG" alt="Shapley values: (left) customer with the lowest uplift, (right) customer with the highest uplift" width="50%" />
<p class="caption">
FIGURE 9.4: Shapley values: (left) customer with the lowest uplift, (right) customer with the highest uplift
</p>
</div>
<p>[DODAĆ WNIOSKI]</p>
<p>In a table @(tab:upliftTABLE) there is a comparison of Shapley values obtained using two methods for the customer with the lowest uplift.</p>
<table>
<thead>
<tr class="header">
<th align="left">Column.name</th>
<th align="right">Uplift</th>
<th align="right">Diff</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">recency</td>
<td align="right">-0.0059</td>
<td align="right">-0.0057</td>
</tr>
<tr class="even">
<td align="left">history</td>
<td align="right">-0.2735</td>
<td align="right">-0.2750</td>
</tr>
<tr class="odd">
<td align="left">mens</td>
<td align="right">-0.0095</td>
<td align="right">-0.0091</td>
</tr>
<tr class="even">
<td align="left">womens</td>
<td align="right">-0.0568</td>
<td align="right">-0.0550</td>
</tr>
<tr class="odd">
<td align="left">zip_code_Suburban</td>
<td align="right">-0.0005</td>
<td align="right">-0.0022</td>
</tr>
<tr class="even">
<td align="left">zip_code_Rural</td>
<td align="right">-0.0325</td>
<td align="right">-0.0322</td>
</tr>
<tr class="odd">
<td align="left">zip_code_Urban</td>
<td align="right">-0.0011</td>
<td align="right">-0.0009</td>
</tr>
<tr class="even">
<td align="left">newbie</td>
<td align="right">0.0046</td>
<td align="right">0.0040</td>
</tr>
<tr class="odd">
<td align="left">channel_Phone</td>
<td align="right">0.0007</td>
<td align="right">0.0009</td>
</tr>
<tr class="even">
<td align="left">channel_Web</td>
<td align="right">0.0014</td>
<td align="right">0.0012</td>
</tr>
<tr class="odd">
<td align="left">chennel_Multichannel</td>
<td align="right">-0.0006</td>
<td align="right">-0.0007</td>
</tr>
<tr class="even">
<td align="left">segment</td>
<td align="right">0.0005</td>
<td align="right">0.0002</td>
</tr>
</tbody>
</table>
<p>Experimental results proved, that these two ways of calulcation are providing close estimations, with precision to numerical errors [TRZEBA NAPISAĆ TEŻ O WPŁYWIE LOSOWOŚCI - LOSUJEMY SUBSET]</p>
<p>Conclusions</p>
<p>In case of our model there is no need to apply LIME as its main advantages - sparsity - is not important as we have few columns.</p>
</div>
<div id="data-scientist-perspective" class="section level3" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> Data scientist perspective</h3>
<p>Unfortunately, its impossible to calculate directly Permutation Feature Importance, because of the previously mentioned problem with lack of full information in both cases: Will the client make the purchse after treatment, and will he without it. Because of having in disposal only historical data (not an oracle), we have only one of these two informations. However, we can make use of the previously computed shapley values of uplift to calculate the same value of permutational feature importance as an average of local shapley importance (defined in a permutational way itself, however calculated in a smarter manner, more in <span class="citation">(Lundberg and Lee <a href="#ref-feature_importance_shap" role="doc-biblioref">2017</a>)</span>.</p>
<p>We decided to evaluate feature importance not from the well-known dataset-level but subset-level. We extracted from the dataset 3 groups: “sleeping dogs”, “persuadables” and “no impact” (this group is a merge of the groups: “sure things” and “lost causes”). The division was based on the predicted uplift. Sleeping dogs have negative uplift, “no impact” have uplift from zero to the defined epsilon and persuadables have uplift greater than epsilon. We decided to not take into consideration epsilon in case of sleeping dogs as we want to be more conservative. The worst thing the company can do is to discourage the customer from buying.</p>
<div class="figure" style="text-align: center"><span id="fig:sleepingDOGS"></span>
<img src="images/09_sleeping_dogs_feature_importance.PNG" alt="Variable importance - &quot;sleeping dogs&quot;" width="100%" />
<p class="caption">
FIGURE 9.5: Variable importance - “sleeping dogs”
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:noIMPACT"></span>
<img src="images/09_sure_things_lost_cases_feature_importance.PNG" alt="Variable importance - &quot;no impact&quot;" width="100%" />
<p class="caption">
FIGURE 9.6: Variable importance - “no impact”
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:persuadables"></span>
<img src="images/09_persuadables_feature_importance.PNG" alt="Variable importance - &quot;persuadables&quot;" width="100%" />
<p class="caption">
FIGURE 9.7: Variable importance - “persuadables”
</p>
</div>
<p>Conclusions</p>
<p>[W TEJ CZĘŚCI DODAMY JESZCZE PDP]</p>
</div>
</div>
<div id="summary-and-conclusions-7" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Summary and conclusions</h2>
<p>Using XAI for uplift modeling helps to understand its complex models better. The analysis goes beyond just assesing whether the model is reliable… it can help the executive to understand better the company customers - their behaviour without paying for some extra surveys to investigate their attitude towards the company.</p>
<p>A vital part of our work was adjusting XAI techniques for the particularities of uplift modeling. We found out that thanks its additivity Shapley values are well suited for uplift modelling - we showed two methods of using it. We identified limitations of well-known Permutation Feature Importance in terms of explaining uplift modeling. It is caused by the fact that unlike in other supervised models here we do not have exactly labels. Therefore we used the generalization of Shapley values that converge to Permutation Feature Importance. We employed the analysis for the three gropus of customers based on the corresponding uplift.</p>
<p>…………………………………..</p>
<p>Here add the most important conclusions related to the XAI analysis.
What did you learn?
Where were the biggest difficulties?
What else did you recommend?</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-uplift_stanford">
<p>Akshay Kumar, Rishabh Kumar. 2018. “Uplift Modeling : Predicting Incremental Gains.” 2018. <a href="http://cs229.stanford.edu/proj2018/report/296.pdf">http://cs229.stanford.edu/proj2018/report/296.pdf</a>.</p>
</div>
<div id="ref-uplift_dataset_marketing">
<p>Hillstrom, Kevin. 2008. “The Minethatdata E-Mail Analytics and Data Mining Challenge Dataset.” 2008. <a href="https://blog.minethatdata.com/2008/03/minethatdata-e-mail-analytics-and-data.html">https://blog.minethatdata.com/2008/03/minethatdata-e-mail-analytics-and-data.html</a>.</p>
</div>
<div id="ref-uplift_approaches">
<p>Lee, Josh Xin Jie. 2018. “Simple Machine Learning Techniques to Improve Your Marketing Strategy: Demystifying Uplift Models.” 2018. <a href="https://medium.com/datadriveninvestor/simple-machine-learning-techniques-to-improve-your-marketing-strategy-demystifying-uplift-models-dc4fb3f927a2">https://medium.com/datadriveninvestor/simple-machine-learning-techniques-to-improve-your-marketing-strategy-demystifying-uplift-models-dc4fb3f927a2</a>.</p>
</div>
<div id="ref-feature_importance_shap">
<p>Lundberg, Scott, and Su-In Lee. 2017. “A Unified Approach to Interpreting Model Predictions.” In.</p>
</div>
<div id="ref-pylift">
<p>“Pylift Package - Documentation.” n.d. <a href="https://pylift.readthedocs.io/en/latest/">https://pylift.readthedocs.io/en/latest/</a>.</p>
</div>
<div id="ref-uplift_dataset_modification">
<p>Rzepakowski, Piotr, and Szymon Jaroszewicz. 2012. “Decision Trees for Uplift Modeling with Single and Multiple Treatments.” <em>Knowledge and Information Systems - KAIS</em> 32 (August). <a href="https://doi.org/10.1007/s10115-011-0434-0">https://doi.org/10.1007/s10115-011-0434-0</a>.</p>
</div>
<div id="ref-book_uplift">
<p>Verbeke, W., and C. Bravo. 2017. <em>Profit Driven Business Analytics: A Practitioner’s Guide to Transforming Big Data into Added Value</em>. Wiley and Sas Business Series. Wiley. <a href="https://books.google.pl/books?id=NCA3DwAAQBAJ">https://books.google.pl/books?id=NCA3DwAAQBAJ</a>.</p>
</div>
<div id="ref-uplift_svm">
<p>Zaniewicz, Lukasz, and Szymon Jaroszewicz. 2013. “Support Vector Machines for Uplift Modeling.” In <em>2013 Ieee 13th International Conference on Data Mining Workshops</em>, 131–38. IEEE.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="heloc-credits.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="examples.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/compstat-lmu/iml_methods_limitations/edit/master/09_Uplift_marketing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
